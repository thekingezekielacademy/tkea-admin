<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ§ª Test - King Ezekiel Academy</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            margin: 20px; 
            line-height: 1.6; 
            background: #f8fafc;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .status { 
            font-weight: bold; 
            margin: 10px 0; 
            padding: 10px;
            border-radius: 6px;
        }
        .success { background: #d1fae5; color: #065f46; }
        .error { background: #fee2e2; color: #991b1b; }
        .warning { background: #fef3c7; color: #92400e; }
        .info { background: #dbeafe; color: #1e40af; }
        #root { 
            border: 2px solid #e5e7eb; 
            padding: 20px; 
            margin: 20px 0; 
            min-height: 200px; 
            background: #f9fafb;
            border-radius: 8px;
        }
        .button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        .button:hover {
            background: #2563eb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ§ª Simple Test - King Ezekiel Academy</h1>
        <p>Testing React app loading in mini browsers and iPhone Safari.</p>
        
        <div class="status info">
            <strong>Browser:</strong> <span id="browser-type">Detecting...</span><br>
            <strong>Device:</strong> <span id="device-type">Detecting...</span><br>
            <strong>Screen:</strong> <span id="screen-size">Detecting...</span>
        </div>
        
        <div id="root">
            <div class="status warning">React app should mount here...</div>
        </div>
        
        <button class="button" onclick="loadReactApp()">Load React App</button>
        <button class="button" onclick="clearRoot()">Clear Root</button>
        <button class="button" onclick="location.reload()">Refresh Page</button>
        
        <div id="test-results"></div>
    </div>

    <script>
        let errors = [];
        
        // Error tracking
        const originalError = console.error;
        console.error = function(...args) {
            errors.push(args.join(' '));
            originalError.apply(console, args);
        };
        
        // Browser detection
        function detectBrowser() {
            const ua = navigator.userAgent || '';
            const isInstagram = /Instagram/i.test(ua);
            const isFacebook = /FBAN|FBAV|FBIOS/i.test(ua);
            const isTikTok = /TikTok/i.test(ua);
            const isTwitter = /Twitter/i.test(ua);
            const isSnapchat = /Snapchat/i.test(ua);
            const isMiniBrowser = isInstagram || isFacebook || isTikTok || isTwitter || isSnapchat || /wv\)/i.test(ua);
            const isSafari = /Safari/i.test(ua) && !/Chrome|CriOS|EdgA|Firefox|FxiOS|OPR|Vivaldi/i.test(ua);
            const isIOS = /iPad|iPhone|iPod/.test(ua);
            const isAndroid = /Android/i.test(ua);
            
            return {
                isMiniBrowser,
                isInstagram,
                isFacebook,
                isTikTok,
                isTwitter,
                isSnapchat,
                isSafari,
                isIOS,
                isAndroid,
                screenSize: `${screen.width}x${screen.height}`,
                viewportSize: `${window.innerWidth}x${window.innerHeight}`
            };
        }
        
        function updateBrowserInfo() {
            const browser = detectBrowser();
            
            let browserType = 'Regular Browser';
            if (browser.isInstagram) browserType = 'Instagram In-App Browser';
            else if (browser.isFacebook) browserType = 'Facebook In-App Browser';
            else if (browser.isTikTok) browserType = 'TikTok In-App Browser';
            else if (browser.isTwitter) browserType = 'Twitter In-App Browser';
            else if (browser.isSnapchat) browserType = 'Snapchat In-App Browser';
            else if (browser.isMiniBrowser) browserType = 'Other Mini Browser';
            else if (browser.isSafari) browserType = 'Safari';
            
            let deviceType = 'Desktop';
            if (browser.isIOS) deviceType = 'iOS Device';
            else if (browser.isAndroid) deviceType = 'Android Device';
            
            document.getElementById('browser-type').textContent = browserType;
            document.getElementById('device-type').textContent = deviceType;
            document.getElementById('screen-size').textContent = `${browser.screenSize} (${browser.viewportSize} viewport)`;
        }
        
        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.textContent = message;
            document.getElementById('test-results').appendChild(div);
        }
        
        function loadReactApp() {
            addResult('Starting React app loading...', 'info');
            
            const browser = detectBrowser();
            if (browser.isMiniBrowser) {
                addResult('Mini browser detected - fixing hash routing...', 'warning');
                if (!location.hash || location.hash === '#') {
                    location.hash = '#/';
                    addResult(`Hash set to: ${location.hash}`, 'success');
                }
            }
            
            // Test React availability
            if (typeof React !== 'undefined') {
                addResult('âœ… React is available', 'success');
            } else {
                addResult('âŒ React not available', 'error');
            }
            
            if (typeof ReactDOM !== 'undefined') {
                addResult('âœ… ReactDOM is available', 'success');
            } else {
                addResult('âŒ ReactDOM not available', 'error');
            }
            
            // Load the main React script
            const script = document.createElement('script');
            script.src = 'https://king-ezekiel-academy-oosb3pavx-king-ezekiel-academys-projects.vercel.app/static/js/main.a37cd3c4.js';
            script.onload = function() {
                addResult('âœ… Main script loaded successfully', 'success');
                
                // Wait for React to initialize
                setTimeout(() => {
                    checkReactMount();
                }, 2000);
            };
            script.onerror = function() {
                addResult('âŒ Failed to load main script', 'error');
            };
            
            document.head.appendChild(script);
        }
        
        function checkReactMount() {
            const rootElement = document.getElementById('root');
            const rootContent = rootElement.innerHTML;
            
            if (rootContent.includes('King Ezekiel Academy') || rootContent.includes('Welcome') || rootContent.includes('Courses')) {
                addResult('âœ… React app mounted successfully!', 'success');
            } else if (rootContent.trim() === '' || rootContent.includes('React app should mount here')) {
                addResult('âŒ React app failed to mount - root is empty', 'error');
            } else {
                addResult('âš ï¸ React app partially loaded', 'warning');
            }
            
            if (errors.length > 0) {
                addResult(`âŒ ${errors.length} console errors detected`, 'error');
                errors.forEach(error => addResult(`Error: ${error}`, 'error'));
            } else {
                addResult('âœ… No console errors', 'success');
            }
        }
        
        function clearRoot() {
            document.getElementById('root').innerHTML = '<div class="status warning">React app should mount here...</div>';
            document.getElementById('test-results').innerHTML = '';
            errors = [];
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateBrowserInfo();
            addResult('Page loaded - ready to test', 'info');
        });
    </script>
</body>
</html>
